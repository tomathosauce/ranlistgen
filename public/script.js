(()=>{"use strict";var t=function(t){return Math.pow(t,2)},e=function(t,e,o,r,i){return Math.pow(1-t,2)*e[i]+2*(1-t)*t*o[i]+Math.pow(t,2)*r[i]};function o(t,e){return{x:t.x-e.x,y:t.y-e.y}}function r(t,e){var o=t.getBoundingClientRect();return{x:e.clientX-o.left,y:e.clientY-o.top}}var i,n=function(){function t(t,e,o){this.active=!1,this.context=t,this.x=e,this.y=o}return t.prototype.mouseUp=function(t,e){throw new Error("Method not implemented.")},t.prototype.draw=function(){throw new Error("Method not implemented.")},t.prototype.mouseMove=function(t,e,o){throw new Error("Method not implemented.")},t}(),c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(e){function o(t,o,r,i){var n=e.call(this,t,o,r)||this;return n.r=i,n.isDragging=!1,n.color="red",n}return c(o,e),o.prototype.inside=function(e,o,r,i){return void 0===r&&(r=0),void 0===i&&(i=0),n=t(this.x-e+r)+t(this.y-o+i),Math.sqrt(n)<=this.r;var n},o.prototype.draw=function(t,e){var o=this.context;o.fillStyle=this.color,o.beginPath(),o.arc(this.x,this.y,this.r,0,2*Math.PI),o.closePath(),o.fill()},o.prototype.change=function(t,e){this.x=t,this.y=e},o.prototype.move=function(t,e){this.x+=t,this.y+=e},o.prototype.setColor=function(t){this.color=t},o}(n),l=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),h=function(t){function e(e,o,r,i,n,c){var l=t.call(this,e,r,i)||this;return l.activeColor="red",l.unActiveColor="blue",l.canvas=o,l.x=r,l.y=i,l.w=n,l.h=c,l.circle=new s(e,r+n/2+1,i+c/2,20),l}return l(e,t),e.prototype.draw=function(){this.canvas,this.context,this.active?this.circle.setColor(this.activeColor):this.circle.setColor(this.unActiveColor),this.circle.draw()},e.prototype.mouseDown=function(t,e){this.circle.inside(t,e)&&(this.active=!0),this.draw()},e.prototype.move=function(t,e){var o=this.circle.y+e,r=this.circle.x+t;this.y<o&&o<this.y+this.h&&this.circle.move(0,e),this.x<r&&r<this.x+this.w&&this.circle.move(t,0)},e.prototype.mouseMove=function(t,e,r){if(this.active){var i=o({x:t,y:e},r),n=i.x,c=i.y;this.move(n,c),this.draw()}},e.prototype.mouseUp=function(t,e){this.active=!1,this.draw()},e.prototype.setColor=function(t,e){this.activeColor=t,this.unActiveColor=e},e}(n),u=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),a=function(t){function e(e,o,r,i,n,c){void 0===c&&(c=10);var l=t.call(this,e,o,r)||this;return l.activeColor="red",l.unActiveColor="blue",l.l=i,l.o=n,l.t=c,l.circle=new s(e,l.x,l.y,2*l.t),l}return u(e,t),e.prototype.draw=function(){this.context.fillStyle="black",this.active?this.circle.setColor(this.activeColor):this.circle.setColor(this.unActiveColor),this.o="v",this.circle.draw()},e.prototype.move=function(t,e){if(this.o="v"){var o=this.circle.y+e;this.y<o&&o<this.y+this.l?this.circle.move(0,e):this.y<o?this.circle.change(this.circle.x,this.y+this.l):this.y>o&&this.circle.change(this.circle.x,this.y),console.log(this.y,this.circle.y+e,this.y+this.l)}else this.circle.move(t,0)},e.prototype.correct=function(){this.y+this.l<this.circle.y?this.circle.change(this.circle.x,this.y+this.l):this.y>this.circle.y&&this.circle.change(this.circle.x,this.y),console.log(this.y,this.circle.y,this.y+this.l)},e.prototype.mouseDown=function(t,e){this.circle.inside(t,e)&&(this.active=!0),this.draw()},e.prototype.mouseMove=function(t,e,r){if(this.active){var i=o({x:t,y:e},r),n=i.x,c=i.y;this.move(n,c),this.draw()}},e.prototype.mouseUp=function(t,e){this.correct(),this.active=!1,this.draw()},e.prototype.setColor=function(t,e){this.activeColor=t,this.unActiveColor=e},e}(n),p=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),y=function(t){function o(e,o,r,i,n,c,s,l){var h=t.call(this,e,o,r)||this;return h.p1=c,h.p2=s,h.p3=l,h.w=i,h.h=n,h.interval=.02,h.context=e,h}return p(o,t),o.prototype.drawDot=function(t,e){this.context.fillRect(t,e,2,2)},o.prototype.translate=function(){},o.prototype.draw=function(){var t=this,o=t.p1,r=t.p2,i=t.p3,n=t.context;n.fillStyle=this.color;for(var c=0;c<=1;c+=this.interval){var s=e(c,o,r,i,"x"),l=e(c,o,r,i,"y");n.fillRect(s+2,l,2,this.y+this.h-l)}},o.prototype.change=function(t,e,o){this.p1=t,this.p2=e,this.p3=o},o.prototype.mouseUp=function(){},o.prototype.mouseMove=function(t,e){},o.prototype.setColor=function(t){this.color=t},o}(n),f=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),v=function(t){function o(e,o,r,i,n,c){var s=t.call(this,e,r,i)||this;return s.circleUnActive="#AA1155",s.circleActive="#DD1155",s.bezierColor="#00CC99",s.background="white",s.w=n,s.h=c,s.canvas=o,s.leftSlider=new a(e,r,i,c,"v"),s.area=new h(e,o,r,i,n,c),s.rightSlider=new a(e,r+n,i,c,"v"),s.tbp=new y(e,r,i,n,c,{x:s.leftSlider.circle.x,y:s.leftSlider.circle.y},{x:s.area.circle.x,y:s.area.circle.y},{x:s.rightSlider.circle.x,y:s.rightSlider.circle.y}),s.leftSlider.setColor(s.circleActive,s.circleUnActive),s.rightSlider.setColor(s.circleActive,s.circleUnActive),s.area.setColor(s.circleActive,s.circleUnActive),s.tbp.setColor(s.bezierColor),s}return f(o,t),o.prototype.draw=function(){var t=this.context;t.fillStyle=this.background,t.fillRect(this.x,this.y,this.w,this.h),this.tbp.draw(),this.area.draw(),this.leftSlider.draw(),this.rightSlider.draw()},o.prototype.updateBezier=function(){this.tbp.change({x:this.leftSlider.circle.x,y:this.leftSlider.circle.y},{x:this.area.circle.x,y:this.area.circle.y},{x:this.rightSlider.circle.x,y:this.rightSlider.circle.y})},o.prototype.erase=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},o.prototype.mouseDown=function(t,e){this.leftSlider.mouseDown(t,e),this.rightSlider.mouseDown(t,e),this.area.mouseDown(t,e)},o.prototype.mouseMove=function(t,e,o){this.erase(),this.leftSlider.mouseMove(t,e,o),this.rightSlider.mouseMove(t,e,o),this.area.mouseMove(t,e,o),this.updateBezier(),this.draw()},o.prototype.generateYBezier=function(t){return function(t,o,r,i){var n=(t.x-o.x+Math.sqrt(i*t.x+i*r.x-2*i*o.x+Math.pow(o.x,2)-t.x*r.x))/(t.x-2*o.x+r.x);return e(n,t,o,r,"y")}({x:this.leftSlider.circle.x,y:this.leftSlider.circle.y},{x:this.area.circle.x,y:this.area.circle.y},{x:this.rightSlider.circle.x,y:this.rightSlider.circle.y},t)},o.prototype.mouseUp=function(t,e){this.leftSlider.mouseUp(),this.rightSlider.mouseUp(),this.area.mouseUp()},o}(n),d=!1,w={x:0,y:0},x=document.getElementById("myCanvas"),m=x.getContext("2d");m.imageSmoothingEnabled=!0,m.font="10px Arial";var g={border:25},b=document.getElementById("inicio"),_=document.getElementById("final"),C=document.getElementById("cant"),S=document.getElementById("gen"),O=new v(m,x,g.border,g.border,x.width-2*g.border,x.height-2*g.border);O.draw(),x.addEventListener("mousedown",(function(t){var e=r(x,t),o=e.x,i=e.y;w={x:o,y:i},d=!0,O.mouseDown(o,i),console.log("mousedown")}),!1),x.addEventListener("mousemove",(function(t){var e=r(x,t),o=e.x,i=e.y;d&&O.mouseMove(o,i,w),w={x:o,y:i}}),!1),x.addEventListener("mouseup",(function(t){var e=r(x,t);w=e,d=!1,console.log("mouseup"),O.mouseUp()}),!1),S.addEventListener("click",(function(){document.getElementById("text").textContent=function(t,e,o,r,i){for(var n=[],c=r-o;n.length<i;)for(var s=0;s<=c;s++){var l=t.w/c*s+2*e.border;if(h=e.border,u=t.h,Math.random()*(u-h)+h>t.generateYBezier(l)&&n.push(s+o),n.length>=i)break}var h,u;return console.log(n),function(t){for(var e,o,r=t.length;0!==r;)o=Math.floor(Math.random()*r),r--,e=[t[o],t[r]],t[r]=e[0],t[o]=e[1];return t}(n.map((function(t){return Math.round(t)}))).join("\n")}(O,g,Number(b.value),Number(_.value),Number(C.value))})),b.addEventListener("change",(function(){b.value>=_.value&&(_.value=""+(Number(b.value)+5))}))})();